<!-- Modern SmartHarvest GH Header Component -->
<header class="main-header redesigned-header">
  <nav class="navbar">
    <a href="index.html" class="logo">SmartHarvest GH</a>
    <ul class="nav-links">
      <li><a href="products.html">Products</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="login.html" class="btn-login">Login</a></li>
      <li><a href="register.html" class="btn-register">Register</a></li>
    </ul>
    <div class="header-cart" id="header-cart-icon" style="display:none;">
      <a href="cart.html" title="View Cart">
        <span class="cart-icon" style="font-size:1.7rem;vertical-align:middle;">ðŸ›’</span>
        <span id="cart-count" style="font-size:1rem;background:var(--color-yellow);color:#fff;border-radius:50%;padding:2px 8px;margin-left:2px;vertical-align:top;">0</span>
      </a>
    </div>
  </nav>
</header>
<script>
  // Show cart icon if logged in
  if (localStorage.getItem('loggedInUser')) {
    document.getElementById('header-cart-icon').style.display = 'inline-block';
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      let count = 0;
      cart.forEach(item => count += item.qty);
      document.getElementById('cart-count').textContent = count;
    }
    updateCartCount();
    window.addEventListener('storage', updateCartCount);
  }
</script>

<script>
  // Hide login/register in header and show logout if logged in
  function updateHeaderAuthLinks() {
    const isLoggedIn = !!localStorage.getItem('loggedInUser');
    document.querySelectorAll('.header-login, .header-register').forEach(el => {
      el.style.display = isLoggedIn ? 'none' : '';
    });
    document.querySelectorAll('.header-logout').forEach(el => {
      el.style.display = isLoggedIn ? '' : 'none';
    });
  }
  updateHeaderAuthLinks();
  window.addEventListener('storage', updateHeaderAuthLinks);
  // Add logout logic
  document.querySelectorAll('.header-logout').forEach(el => {
    el.onclick = function(e) {
      e.preventDefault();
      localStorage.removeItem('loggedInUser');
      window.location.href = 'login.html';
    };
  });
</script>
